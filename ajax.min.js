var ajax=function(d){
	var _=null,
		u=void 0,
		w=window,
		l='length',
		o=Object,
		q='data',
		f='FormData';
	if(d.url===u){
		throw Error('Error: url not defined!');
	}
	s=this;
	s.a=d.url;
	s.m=(d.method!=u && (d.method instanceof String))?d.method.toUpperCase():'GET';
	s.x=new XMLHttpRequest();
	s.d=(d[q]!=u && d[q] instanceof f)?d[q]:new w[f]();
	s.h=(d.headers instanceof o && o.keys(d.headers).length>0)?d.headers:{};
	s.b=(d.beforeSend)?d.beforeSend:_;
	s.e=(d.onError)?d.onError:_;
	s.c=(d.success)?d.success:_;
	if(s.m=='POST'){
		if(o.keys(d[q])[l]>0 && d[q] instanceof o && !(d[q] instanceof f)){
			for(var i in d[q]){
				if(d[q][i]!=_){
					s.d.append(i,d[q][i]);
				}
			}
		}
	}else if(s.m=='GET'){
		if(o.keys(s.d)[l]>0){
			g="";
			for(let [n,v] of s.d){
				g+=n+"="+v+"&";
			}
			g=g.slice(0,-1);
			s.a+=((g[l]>0)?((s.a.indexOf("?")>-1)?"?":"&")+g:'');
		}
	}
	s.x.open(s.m,s.a);
	if(o.keys(s.h)[l]>0){
		for(let [n,v] of s.h){
			s.x.setRequestHeader(n,v);
		}
	}
	s.x.onreadystatechange=function(){
		if(s.x.readyState!=4){
			return;
		}
		if(s.x.readyState==4){
			if(s.x.status==200){
				if(s.c!=_){
					return s.c(s.x.responseText);
				}
			}else{
				if(s.e!=_){
					return s.e();
				}
			}
		}
	};
	if(s.b!=_){
		s.b();
	}
	s.x.send(s.d);
};